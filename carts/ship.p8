pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- init
function _init()
	bg=1
	stars={}
 for i=1,25 do
 	add(stars,{x=flr(rnd(128)),y=flr(rnd(128)),spd=rnd(2)+0.5})
 end
 enemies={} 
 ship={x=63,y=100,spd=1,sprite=2,flamespr=5}
 bullets={}
 muzzlesize=0
 lastshot=0
 pwrups={bomb=false,health=false,gun=true}
 lose=false
 level=1
 score=0
 maxlives=5
 lives=2 
end



-->8
-- update
function _update()
	if lose then
		gameover()
	else
		updatebullets()
		if #enemies<1 then
			updateenemies()
		end
		updateship()
	end
end

-->8
-- draw
function _draw()
	if not lose then
		cls(bg)
		foreach(stars, drawstar)
		foreach(bullets, drawbullet)
		foreach(enemies, drawenemy)
		
		spr(ship.sprite,ship.x,ship.y)
		if ship.sprite==1 then
			spr(ship.flamespr,ship.x+1,ship.y+6)
		elseif ship.sprite==3 then
			spr(ship.flamespr,ship.x-1,ship.y+6)
		else
			spr(ship.flamespr,ship.x,ship.y+6)
		end
		if muzzlesize>0 then
			circfill(ship.x+3,ship.y-2,muzzlesize,7)
		end
		
		-- hud icons
		print("score: "..score,2,2,7)
		for i=1,maxlives do
			if lives+1>i then
				spr(10,127-i*9,1)
			else 
				spr(11,127-i*9,1)
			end
		end
		if pwrups.bomb==true then
			spr(12,127-9,9)
		else 
			spr(13,127-9,9)
		end
	else
		gameover()
		foreach(stars, drawstar)
	end
end

function drawobj(o)
	spr(o.sprite+o.frame,o.x,o.y)
end

-->8
-- stars
function drawstar(s)
-- colour=speed: fake distance
	local colour=6
	if s.spd<0.5 then
		circfill(s.x,s.y,2,2)
	elseif s.spd<1 then
	 pset(s.x,s.y,5)
	elseif s.spd<2 then
		pset(s.x,s.y,6)
	else
		line(s.x,s.y,s.x,s.y+1,7)
	end

-- move the stars
	s.y+=s.spd

-- remove stars if off screen
	if s.y>128 then
		del(stars, s)
		add(stars,{x=flr(rnd(128)),y=0,spd=rnd(2)+0.49})
	end
end
-->8
-- ship

--[[
ship={x,y,spd,sprite,flamespr}

spd:speed of ship
sprite: starting sprite
 note - middle frame
flamesprite: engine flames
 note - first frame / 6 frames 
]]


function updateship()
-- move ⬅️⬆️⬇️➡️ + edge detect
	local dx=0
	local dy=0
	
	if btn(⬅️) then dx-=1 end
	if btn(➡️) then dx+=1 end
	if btn(⬆️) then dy-=1 end
	if btn(⬇️) then dy+=1 end
	
	if dx<0 then
		ship.sprite=1
	elseif dx>0 then
		ship.sprite=3
	else
		ship.sprite=2
	end
	
	ship.x+=dx*ship.spd
	ship.y+=dy*ship.spd
	
	if ship.x<0 then ship.x=0 end
	if ship.x>120 then ship.x=120 end
	if ship.y<0 then ship.y=0 end
	if ship.y>120 then ship.y=120 end

-- flame sprite animation
	ship.flamespr+=1
	if ship.flamespr>9 then
		ship.flamespr=4
	end
end

-->8
-- bullets

--[[ 
bullet={x,y,spd,sprite,frame}

sprite: starting sprite
frame: current animation frame
	note - bullets have 3 frmes
spd: speed of bullet
]]

function updatebullets()
	if btn(❎) then
		if #bullets<1 and lastshot>15 then
	 	add(bullets,{x=ship.x,y=ship.y-2,spd=2,sprite=16,frame=0,animspd=0.2})
	  lastshot=0
	  muzzlesize=5
	  sfx(0)
		end
	end
	if muzzlesize > 0 then
	 muzzlesize-=1.5
	end
	lastshot+=1
end


function drawbullet(b)
	b.frame+=b.animspd
	if b.frame>=2 then
		b.frame=0
	end
	b.y-=b.spd
	drawobj(b)
	if b.y<0 then del(bullets,b) end
end
-->8
-- gameover
function gameover()
 cls(bg)
 print("\^w\^tnot cool",36,48,7)
 print("press ❎ to try again",hcenter("press ❎ to try again"),64,7)
 if btnp(❎) then 
 	lose=false
 	_init()
 end
end

-- text
function hcenter(string)
  return 64-#string*2
end
-->8
-- enemies

-- update
function updateenemies()
	e={x=60,y=40,sprite=19,frame=0,animspd=0.1}
	add(enemies,e)
end

-- draw
function drawenemy(e)
	e.frame+=e.animspd
	if e.frame>=2 then
		e.frame=0
	end
	e.y+=1
	e.x+=0	
	drawobj(e)
end

__gfx__
00000000000065000006500000650000000000000000000000000000000000000000000000000000088008800880088006666660066666600666666000000000
070000700006660000666500006650000009700000097000000770000007700000079000000790008888888280088002699999956ff33ff56449444500000000
007007000007c6900967c5900967c00000097000000c700000797700007797000007c00000079000887888828000000261cccca56f7bb77564aaaa9500000000
00077000000cc6500d6cc6500d6cc000000c7000000c7000000cc000000cc0000007c0000007c000888888828000000269aaaca563bbbbb564a88aa500000000
00077000000666500666665006665000000c7000000c000000000000000000000000c0000007c000088888200800002061ccaca563bbbbb569a88a9500000000
00700700000868200886582008852000000c7000000000000000000000000000000000000007c000002882000020020069acaca56f7bb77564aaaa9500000000
070000700008d820082d182008d12000000070000000700000000000000000000007000000070000000220000002200061acaca56f7bb7756499a99500000000
000000000008d1200810012008112000000000000000000000000000000000000000000000000000000000000000000005555550055555500555555000000000
00000000000000000000000000776600007766000077660000776600000760000007600000000000000000000000000000000000000000000000000000000000
00077000000aa000000aa00007777760077777600777776007777760007776000077760000000000000000000000000000666600006666000066660000000000
0007a000000a7000000aa0007777777677777776077782600777286000782600007286000097990000999700009999000699995006f33f500649945000000000
000aa00000077000000aa000782782767287287607827760072877600077760000777600007aa900009a7900009aa900061cca50063bbb5006988a5000000000
000aa0000007a000000a7000777777660777776007777660077776600706706007067060009aa9000097a900009aa700069aca50063bbb5006988a5000000000
0009a000000a900000097000607666067076660607600760076007607007600670700606009999000079990000997900061aca5006fbb750064aa95000000000
000a00000000a000000a000000000000600000060070060007000060700000067000000600000000000000000000000000555500005555000055550000000000
00000000000000000000000000000000000000000000000000000000060000600600006000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000060000000000000650000000000000600000000000000000000000000000000000000000000000000000000000000000
0007000000060000000b000000000000665000000000006665000000000006650000000000000000000000000000000000000000000000000000000000000000
0000b000000730000006300000000096665900000009066665509000000096665900000000000000000000000000000000000000000000000000000000000000
000b00000000b00000073000000000dcc6650000000d066cc65050000000d66cc500000000000000000000000000000000000000000000000000000000000000
000bb000000b00000000b000000000c7cc650000000d66c7cc5550000000d6c7cc00000000000000000000000000000000000000000000000000000000000000
00063000000bb000000b0000000000cccc610000000d66cccc5550000000d6cccc00000000000000000000000000000000000000000000000000000000000000
00003000000030000000b0000000006cc6610000000d666cc65550000000d66cc500000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000066666500000000666666550000000066666500000000000000000000000000000000000000000000000000000000000000
00898900008999000098990000000066665200000008666665552000000086665500000000000000000000000000000000000000000000000005500000000000
089aa9900899aa9009899aa000000866658220000088866665582200000888655520000000000000000000000000000000000000000000000056650000000000
99a7a999999a7a899999a7a90000086658882000008882665588220000088825552000000000000000000000000000000000000000000000006cc60000000000
9a77799899a77799899a7779000008dd18882000008822dd118822000008822d1120000000000000000000000000000000000000000000000067c60000000000
8a77998889a77998889a7798000008dd1182200000882dd111182200000882d11120000000000000000000000000000000000000000000000551155000000000
89a79888899979888899a798000008d10102200000820d1001102200000820d01120000000000000000000000000000000000000000000000286682000000000
098998000989988000899980000008d00100200000800d0000100200000800100120000000000000000000000000000000000000000000000885588000000000
090900800909080009009080000008d0010020000080010000100200000800100120000000000000000000000000000000000000000000000809908000000000
__label__
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888eeeeee888eeeeee888777777888eeeeee888888888888888888888888888888888888888888888ff8ff8888228822888222822888888822888888228888
8888ee888ee88ee88eee88778887788ee888ee88888888888888888888888888888888888888888888ff888ff888222222888222822888882282888888222888
888eee8e8ee8eeee8eee8777778778eeeee8ee88888e88888888888888888888888888888888888888ff888ff888282282888222888888228882888888288888
888eee8e8ee8eeee8eee8777888778eeee88ee8888eee8888888888888888888888888888888888888ff888ff888222222888888222888228882888822288888
888eee8e8ee8eeee8eee8777877778eeeee8ee88888e88888888888888888888888888888888888888ff888ff888822228888228222888882282888222288888
888eee888ee8eee888ee8777888778eee888ee888888888888888888888888888888888888888888888ff8ff8888828828888228222888888822888222888888
888eeeeeeee8eeeeeeee8777777778eeeeeeee888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111d1d1ddd1dd11ddd1ddd1ddd11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111d1d1d1d1d1d1d1d11d11d1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1ddd1ddd11111d1d1ddd1d1d1ddd11d11dd111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111d1d1d111d1d1d1d11d11d1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111dd1d111ddd1d1d11d11ddd11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1ee111ee1eee1eee11ee1ee1111111111616166616611666166616661171117111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e1e1111e111e11e1e1e1e111111111616161616161616116116111711111711111111111111111111111111111111111111111111111111111111
1ee11e1e1e1e1e1111e111e11e1e1e1e111111111616166616161666116116611711111711111111111111111111111111111111111111111111111111111111
1e111e1e1e1e1e1111e111e11e1e1e1e111111111616161116161616116116111711111711111111111111111111111111111111111111111111111111111111
1e1111ee1e1e11ee11e11eee1ee11e1e111116661166161116661616116116661171117111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111166161616661666111111661666166616661666166611111ccc111111111111111111111111111111111111111111111111111111111111111111111111
1111161116161161161611111611161616161161116116111777111c111111111111111111111111111111111111111111111111111111111111111111111111
11111666166611611666111116661666166111611161166111111ccc111111111111111111111111111111111111111111111111111111111111111111111111
11111116161611611611111111161611161611611161161117771c11111111111111111111111111111111111111111111111111111111111111111111111111
11111661161616661611117116611611161616661161166611111ccc111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111166161616661666166611661616166611711171111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111611161611611616166616161616161117111117111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111666166611611666161616161616166117111117111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111116161611611611161616161666161117111117111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111661161616661611161616611161166611711171111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1eee11111bbb1bbb1bb11bbb11711ccc117111111eee1ee11ee1111117171666161616111611166616661166111711111eee1e1e1eee1ee111111111
111111e11e1111111b1b11b11b1b1b1b17111c11111711111e1e1e1e1e1e1111177716161616161116111611116116111171111111e11e1e1e111e1e11111111
111111e11ee111111bb111b11b1b1bbb17111ccc111711111eee1e1e1e1e1111171716611616161116111661116116661711111111e11eee1ee11e1e11111111
111111e11e1111111b1b11b11b1b1b111711111c111711111e1e1e1e1e1e1111177716161616161116111611116111161171111111e11e1e1e111e1e11111111
11111eee1e1111111bbb11b11b1b1b1111711ccc117111111e1e1e1e1eee1111171716661166166616661666116116611117111111e11e1e1eee1e1e11111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111bbb1bb11bb1117116661616161116111666166611661111117716161111116616161666166611111616111116161111116616161666166611111616
111111111b1b1b1b1b1b171116161616161116111611116116111111117116161777161116161161161611111616111116161777161116161161161611111616
111111111bbb1b1b1b1b171116611616161116111661116116661111177111611111166616661161166611111161111116661111166616661161166611111666
111111111b1b1b1b1b1b171116161616161116111611116111161171117116161777111616161161161111111616117111161777111616161161161111111116
111111111b1b1bbb1bbb117116661166166616661666116116611711117716161111166116161666161111711616171116661111166116161666161111711666
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111166616161666166616111666116616661666166611111ccc111111111111111111111111111111111111111111111111111111111111111111111111
11111111166616161116111616111611161111611116161117771c11111111111111111111111111111111111111111111111111111111111111111111111111
11111111161616161161116116111661166611611161166111111ccc111111111111111111111111111111111111111111111111111111111111111111111111
1111111116161616161116111611161111161161161116111777111c111111111111111111111111111111111111111111111111111111111111111111111111
11111111161611661666166616661666166116661666166611111ccc111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111bb1bbb1b1b11711ccc1171111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111b111b111b1b17111c1c1117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111bbb1bb111b117111c1c1117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111b1b111b1b17111c1c1117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111bb11b111b1b11711ccc1171111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1ee11ee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111ee11e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1e1e1eee1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1eee111116661616166616661611166611661666166616661111171111111ccc11111eee1e1e1eee1ee1111111111111111111111111111111111111
111111e11e11111116661616111611161611161116111161111616111111117111111c1c111111e11e1e1e111e1e111111111111111111111111111111111111
111111e11ee1111116161616116111611611166116661161116116611111111711111c1c111111e11eee1ee11e1e111111111111111111111111111111111111
111111e11e11111116161616161116111611161111161161161116111111117111111c1c111111e11e1e1e111e1e111111111111111111111111111111111111
11111eee1e11111116161166166616661666166616611666166616661111171111111ccc111111e11e1e1eee1e1e111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111666161616661666161116661166166616661666111111111cc111111ccc111111111111111111111111111111111111111111111111111111111111
1111111116661616111611161611161116111161111616111111177711c111111c11111111111111111111111111111111111111111111111111111111111111
1111111116161616116111611611166116661161116116611777111111c111111ccc111111111111111111111111111111111111111111111111111111111111
1111111116161616161116111611161111161161161116111111177711c11111111c111111111111111111111111111111111111111111111111111111111111
111111111616116616661666166616661661166616661666111111111ccc11c11ccc111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1ee11ee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111ee11e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111e111e1e1e1e1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111eee1e1e1eee1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111116111666116616661166161611661666111111111cc111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111161116161611116116111616161611611171177711c111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111161116661666116116661666161611611777111111c111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111161116161116116111161616161611611171177711c111111111111111111111111111111111111111111111111111111111111111111111111111111111
111116661616166111611661161616611161111111111ccc11111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1ee11ee111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1ee11e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1e111e1e1e1e11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1eee1e1e1eee11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
82888222822882228888822288828228822288888888888888888888888888888888888888888888888888888222822282228882822282288222822288866688
82888828828282888888828888288828828888888888888888888888888888888888888888888888888888888288828888828828828288288282888288888888
82888828828282288888822288288828822288888888888888888888888888888888888888888888888888888222822282228828822288288222822288822288
82888828828282888888888288288828888288888888888888888888888888888888888888888888888888888882888282888828828288288882828888888888
82228222828282228888822282888222822288888888888888888888888888888888888888888888888888888222822282228288822282228882822288822288
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888

__sfx__
0001000034520325202e5202852024520225201b5201952015520105200b520075200652004520025200052005200042000420004200000000000000000000000000000000000000000000000000000000000000
001000100e120211000e12027100111200e120241000d1200c1000d1200c1000d120101201c10011120211000e120211000e12027100111200e120241000d1200c1000d1200c1000d120101201c1001112000000
0002000015600166001860019600196001a60019600176001560012600106000d6000960004600016000060000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 01024344

